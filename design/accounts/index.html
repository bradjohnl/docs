<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Accounts | Casper</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://operators.casper.network//docs/design/accounts"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Accounts | Casper"><meta data-react-helmet="true" name="description" content="accounts-head}"><meta data-react-helmet="true" property="og:description" content="accounts-head}"><link data-react-helmet="true" rel="shortcut icon" href="/docs/image/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://operators.casper.network//docs/design/accounts"><link data-react-helmet="true" rel="alternate" href="https://operators.casper.network//docs/design/accounts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://operators.casper.network//docs/design/accounts" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.cb2bace2.css">
<link rel="preload" href="/docs/assets/js/runtime~main.5567e44f.js" as="script">
<link rel="preload" href="/docs/assets/js/main.eb1c9356.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/icon/logo-dark.svg" alt="Casper Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/icon/logo-white.svg" alt="Casper Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/docs/workflow">How To&#x27;s</a><a class="navbar__item navbar__link" href="/docs/dapp-dev-guide">Developers</a><a class="navbar__item navbar__link" href="/docs/operators">Operators</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/design">Design</a><a class="navbar__item navbar__link" href="/docs/economics">Economics</a><a class="navbar__item navbar__link" href="/docs/staking">Staking</a><a class="navbar__item navbar__link" href="/docs/glossary">Glossary</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/design/accounts" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li></ul></div><a href="https://github.com/casper-network/docs-app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒ™</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/p2p">Network Communication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/global-state">Global State</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/execution-semantics">Execution Semantics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/design/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/block-structure">Block Structure</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/uref">Unforgeable Reference (URef)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/serialization-standard">Serialization Standard</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/tokens">Tokens</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/checksummed-hex">Checksum Hex Encoding</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/design/appendix">Appendix</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Accounts</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accounts-intro"></a>Introduction<a class="hash-link" href="#accounts-intro" title="Direct link to heading">#</a></h2><p>An <em>account</em> is a cryptographically secured gateway into the Casper system used by entities outside the blockchain (e.g., off-chain components of blockchain-based applications, individual users). All user activity on the Casper blockchain (i.e., &quot;deploys&quot;) must originate from an account. Each account has its own context where it can locally store information (e.g., references to useful contracts, metrics, aggregated data from other parts of the blockchain). Each account also has a &quot;main purse&quot; where it can hold Casper tokens (see <a href="/docs/design/tokens#tokens-purses-and-accounts">Tokens</a> for more information).</p><p>In this chapter we describe the permission model for accounts, their local storage capabilities, and briefly mention some runtime functions for interacting with accounts.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accounts-data-structure"></a>The <code>Account</code> data structure<a class="hash-link" href="#accounts-data-structure" title="Direct link to heading">#</a></h2><p>An <code>Account</code> contains the following data:</p><ul><li>A collection of named keys (this plays the same role as the named keys in a <a href="/docs/design/global-state#global-state-intro">stored contract</a>)</li><li>A <code>URef</code> representing the account&#x27;s &quot;main purse&quot;</li><li>A collections of &quot;associated keys&quot; (see below for more information)</li><li>&quot;Action thresholds&quot; (see below for more information)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accounts-permissions"></a>Permissions model<a class="hash-link" href="#accounts-permissions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="accounts-actions-thresholds"></a>Actions and thresholds<a class="hash-link" href="#accounts-actions-thresholds" title="Direct link to heading">#</a></h3><p>There are two types of actions an account can perform: a deployment, and key management. A deployment is simply executing some code on the blockchain, while key management involves changing the associated keys (which will be described in more detail later). Key management cannot be performed independently, as all effects to the blockchain must come via a deploy; therefore, a key management action implies that a deployment action is also taking place. The <code>ActionThresholds</code> contained in the <code>Account</code> data structure set a <code>Weight</code> which must be met in order to perform that action. How these weight thresholds can be met is described in the next section. Since a key management action requires a deploy action, the key management threshold should always be greater than or equal to the deploy threshold.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="accounts-associated-keys-weights"></a>Associated keys and weights<a class="hash-link" href="#accounts-associated-keys-weights" title="Direct link to heading">#</a></h3><p>As mentioned in the introduction, accounts are secured via cryptography. The <em>associated keys</em> of an account are the set of public keys which are allowed to provide signatures on deploys for that account. Each associated key has a weight; these weights are used to meet the action thresholds provided in the previous section. Each deploy must be signed by one or more keys associated with the account that deploy is for, and the sum of the weights of those keys must be greater than or equal to the deployment threshold weight for that account. We call the keys that have signed a deploy the &quot;authorizing keys&quot;. Similarly, if that deploy contains any key management actions (detailed below), then the sum of the weights of the authorizing keys must be greater than or equal to the key management action threshold of the account.</p><p>Note: that any key may be used to help authorize any action; there are no &quot;special keys&quot;, all keys contribute their weight in exactly the same way.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="accounts-key-management"></a>Key management actions<a class="hash-link" href="#accounts-key-management" title="Direct link to heading">#</a></h3><p>A <em>key management action</em> is any change to any of the permissions parameters for the account. This includes the following:</p><ul><li>adding or removing an associated key;</li><li>changing the weight of an associated key;</li><li>changing the threshold of any action.</li></ul><p>Key management actions have validity rules which prevent a user from locking themselves out of their account. For example, it is not allowed to set a threshold larger than the sum of the weights of all associated keys.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="accounts-recovery"></a>Account security and recovery using key management<a class="hash-link" href="#accounts-recovery" title="Direct link to heading">#</a></h3><p>The purpose of this permissions model is to enable keeping accounts safe from lost or stolen keys, while allowing usage of capabilities of modern mobile devices. For example, it may be convenient to sign deploys from a smart phone in day-to-day usage, and this can be done without worrying about the repercussions of losing the phone. The recommended setup would be to have a low-weight key on the phone, only just enough for the deploy threshold, but not enough for key management, then if the phone is lost or stolen, a key management action using other associated keys from another device (e.g., a home computer) can be used to remove the lost associated key and add a key which resides on a replacement phone.</p><p>Note: that it is extremely important to ensure there will always be access to a sufficient number of keys to perform the key management action, otherwise future recovery will be impossible (we currently do not support &quot;inactive recovery&quot;).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accounts-creating"></a>Creating an account<a class="hash-link" href="#accounts-creating" title="Direct link to heading">#</a></h2><p>Account creation happens automatically when there is a <a href="/docs/design/tokens#tokens-purses-and-accounts">token transfer</a> to a yet unused <a href="/docs/design/global-state#global-state-intro">identity key</a>. When an account is first created, the balance of its main purse is equal to the number of tokens transferred, its action thresholds are equal to 1, and there is one associated key (equal to the public key used to derive the identity key) with weight 1.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accounts-context"></a>The account context<a class="hash-link" href="#accounts-context" title="Direct link to heading">#</a></h2><p>A deploy is a user request to perform some execution on the blockchain (see <a href="/docs/design/execution-semantics#execution-semantics-deploys-as-functions">Execution Semantics</a> for more information). It contains &quot;payment code&quot; and &quot;session code&quot; which are contracts that contain the logic to be executed. These contracts are executed in the context of the account of the deploy. This means these contracts use the named keys of the account and use the account&#x27;s local storage (i.e., the &quot;root&quot; for the <a href="/docs/design/global-state#global-state-intro">local keys</a> come from the account identity key).</p><p>Note: that other contracts called from the session code by <code>call_contract</code> are executed in their own context, not the account context. This means, an account (with logic contained in session code) can be used to locally store information relevant to the user owning the account.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accounts-api-functions"></a>Functions for interacting with an account<a class="hash-link" href="#accounts-api-functions" title="Direct link to heading">#</a></h2><p>The <a href="https://docs.rs/casper-contract/1.0.1/casper_contract/ext_ffi/index.html" target="_blank" rel="noopener noreferrer">Casper Rust library</a> contains several functions for working with the various account features:</p><ul><li><code>casper_add_associated_key</code></li><li><code>casper_remove_associated_key</code></li><li><code>casper_update_associated_key</code></li><li><code>casper_set_action_threshold</code></li><li><code>casper_get_balance</code></li><li><code>casper_load_named_keys</code></li><li><code>casper_get_named_arg</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/casper-network/documentation/tree/master/docs/casper/design/accounts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/design/execution-semantics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Execution Semantics</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/design/block-structure"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Block Structure Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#accounts-intro" class="table-of-contents__link">Introduction</a></li><li><a href="#accounts-data-structure" class="table-of-contents__link">The <code>Account</code> data structure</a></li><li><a href="#accounts-permissions" class="table-of-contents__link">Permissions model</a><ul><li><a href="#accounts-actions-thresholds" class="table-of-contents__link">Actions and thresholds</a></li><li><a href="#accounts-associated-keys-weights" class="table-of-contents__link">Associated keys and weights</a></li><li><a href="#accounts-key-management" class="table-of-contents__link">Key management actions</a></li><li><a href="#accounts-recovery" class="table-of-contents__link">Account security and recovery using key management</a></li></ul></li><li><a href="#accounts-creating" class="table-of-contents__link">Creating an account</a></li><li><a href="#accounts-context" class="table-of-contents__link">The account context</a></li><li><a href="#accounts-api-functions" class="table-of-contents__link">Functions for interacting with an account</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright"><div class="footer-inner-container">
    <div class="footer-top">
        <ul class="items">
            <li><a href="https://arxiv.org/pdf/2101.02159.pdf" target="_blank" rel="noopener">White Paper</a></li>
            <li>
                <a href="https://casper.network/docs" target="_blank" rel="noopener"> Docs </a>
            </li>
            <li><a href="https://devxdao.com/" target="_blank" rel="noopener">Grant Program</a></li>
            <li><a href="https://casper.network/network/casper-association" target="_blank" rel="noopener">Casper Association</a></li>
        </ul>
    </div>
    <div class="footer-bottom">
        <ul class="items left">
            <li>
                <a href="https://casper.network/en/network" target="_blank" rel="noopener">
                    <img class="footer-logo" src="/docs/icon/logo-white.svg" alt="Casper Logo">
                </a>
            </li>
            <li>Â© 2021 Casper Association</li>
        </ul>
        <ul class="items right">
            <li class="trademark">
                <a href="https://casper.network/network/trademark-policy" target="_blank" rel="noopener">Trademark Policy and Guidelines</a>
            </li>
        </ul>
    </div>
</div>
</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.5567e44f.js"></script>
<script src="/docs/assets/js/main.eb1c9356.js"></script>
</body>
</html>