"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6754],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=u(n),h=o,b=p["".concat(c,".").concat(h)]||p[h]||l[h]||a;return n?r.createElement(b,i(i({ref:t},d),{},{components:n})):r.createElement(b,i({ref:t},d))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1402:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return d},default:function(){return p}});var r=n(2122),o=n(9756),a=(n(7294),n(3905)),i=["components"],s={},c="Unbonding",u={unversionedId:"operators/unbonding",id:"operators/unbonding",isDocsHomePage:!1,title:"Unbonding",description:"Once a bid is placed, it will remain in the state of the auction contract. Even if the bid does not win a slot right away. The reason for this is that new slots may become available if bonded validators leave the network, or reduce their bond amounts. Therefore, a bid must be explicitly withdrawn in order to remove the bid from the auction. Bonded validators also have a bid in the auction, to unbond stake, this bid must be reduced. Since tokens will be transferred out of the bid purse, it's important to compile the contract to withdraw the bid yourself, so there is confidence in the correctness of the contract. The process is essentially the same as bonding, but uses a different contract, withdraw_bid.wasm.",source:"@site/source/docs/casper/operators/unbonding.md",sourceDirName:"operators",slug:"/operators/unbonding",permalink:"/docs/operators/unbonding",editUrl:"https://github.com/casper-network/documentation/tree/master/docs/casper/operators/unbonding.md",tags:[],version:"current",frontMatter:{},sidebar:"operators",previous:{title:"Bonding",permalink:"/docs/operators/bonding"}},d=[{value:"Withdrawal Request",id:"withdrawal-request",children:[]},{value:"Contract Arguments",id:"contract-arguments",children:[]},{value:"Unbonding Wait Period",id:"unbonding-wait-period",children:[]}],l={toc:d};function p(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"unbonding"},"Unbonding"),(0,a.kt)("p",null,"Once a bid is placed, it will remain in the state of the auction contract. Even if the bid does not win a slot right away. The reason for this is that new slots may become available if bonded validators leave the network, or reduce their bond amounts. Therefore, a bid must be explicitly withdrawn in order to remove the bid from the auction. Bonded validators also have a bid in the auction, to unbond stake, this bid must be reduced. Since tokens will be transferred out of the bid purse, it's important to compile the contract to withdraw the bid yourself, so there is confidence in the correctness of the contract. The process is essentially the same as bonding, but uses a different contract, ",(0,a.kt)("inlineCode",{parentName:"p"},"withdraw_bid.wasm"),"."),(0,a.kt)("h2",{id:"withdrawal-request"},"Withdrawal Request"),(0,a.kt)("p",null,"Note the path to files and keys. Note: the session arguments need to be encased in double quotes, with the parameter values in single quotes. Note the required payment amount. It must contain at least 12 zeros. Payment amount is specified in motes."),(0,a.kt)("p",null,"To withdraw a bid, compile the contract & submit a deploy:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'\ncasper-client put-deploy --chain-name <CHAIN_NAME> --node-address http://<HOST>:<PORT> --secret-key <VALIDATOR_SECRET_KEY>.pem --session-path $HOME/casper-node/target/wasm32-unknown-unknown/release/withdraw_bid.wasm --payment-amount 1000000000 --session-arg="public_key:public_key=\'<VALIDATOR_PUBLIC_KEY_HEX>\'" --session-arg="amount:u512=\'<AMOUNT_TO_WITHDRAW>\'" --session-arg="unbond_purse:opt_uref=null"\n')),(0,a.kt)("h2",{id:"contract-arguments"},"Contract Arguments"),(0,a.kt)("p",null,"The withdraw_bid contract accepts 3 arguments:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"public key: The public key in hex of the account to withhdraw. Note: This has to be the matching key to the validator secret key that signs the deploy, and has to match the public key of a bid in the auction contract."),(0,a.kt)("li",{parentName:"ul"},"amount: This is the amount that is being withdrawn."),(0,a.kt)("li",{parentName:"ul"},"unbond_purse (optional): The purse to which the withdrawal will be remitted. Defaults to the main purse for the account if not provided.")),(0,a.kt)("p",null,"Similar to bonding (bidding) - check the auction contract for updates to the bid amounts."),(0,a.kt)("h2",{id:"unbonding-wait-period"},"Unbonding Wait Period"),(0,a.kt)("p",null,"In order to prevent 'long range attacks', requests to unbond must go through a mandatory wait period. This wait period is presently set to 15 eras."))}p.isMDXComponent=!0}}]);